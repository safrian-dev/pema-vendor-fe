"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[230],{977:(e,t,n)=>{n.d(t,{F:()=>s,Z:()=>l});n(2791);var i=n(5218),a=n(184);const s=()=>(0,a.jsx)(i.x7,{toastOptions:{className:"",style:{}}}),l=(e,t)=>{((e,t)=>{"success"===e?i.ZP.success(t):"create"===e?(0,i.ZP)(t,{icon:"\ud83e\udd17"}):"start"===e?(0,i.ZP)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,i.ZP)("Horeee, task done!",{icon:"\ud83d\udc4f"}):i.ZP.error(t)})(e,t)}},2230:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var i=n(690),a=n.n(i),s=n(2791),l=n(7689),r=n(1087),o=n(3464),d=n(9037),c=n(3009),u=n(9773),m=n(4448),p=n(9399),f=n(6167),h=n(2976),x=n(8118),j=n(9127),b=n(4828),y=n(8404),g=n(4323),v=n(977),k=n(7493),_=n(184);const Z=[{id:0,title:"Surat Penyampaian Penawaran",name:"dok_surat_penyampaian_penawaran",template:!0,doc_file:""},{id:1,title:"Formulir Isian Kualifikasi",name:"dok_formulir_isian_kualifikasi",template:!0,doc_file:"https://api.ptpema.co.id/vendor_file/templates/data_kualifikasi.docx"},{id:2,title:"Fakta Integritas",name:"dok_fakta_integritas",template:!0,doc_file:"https://api.ptpema.co.id/vendor_file/templates/fakta_integritas.docx"},{id:3,title:"HSE Plan",name:"dok_hse_plan"},{id:4,title:"Jaminan Penawaran",name:"dok_jaminan_penawaran"},{id:5,title:"Kelengkapan Izin Usaha",name:"dok_kelengkapan_izin_usaha"},{id:6,title:"List Peralatan",name:"dok_list_peralatan"},{id:7,title:"List Man Power + CV",name:"dok_listmanpower_plus_cv"},{id:8,title:"Metode Pelaksanaan (Jasa)",name:"dok_metode_pelaksanaan"},{id:9,title:"Surat Penawaran Komersial",name:"dok_penawaran_komersial"},{id:10,title:"Perhitungan TKDN",name:"dok_perhitungan_tkdn"},{id:11,title:"QA/QC Plan",name:"dok_qaqc_plan"},{id:12,title:"Schedule Pekerjaan",name:"dok_schedule_pekerjaan"},{id:13,title:"Struktur Organisasi Pekerjaan",name:"dok_struktur_organisasi_pekerjaan"},{id:14,title:"*Dokumen Wajib Lainnya",name:"dok_wajib_lainnya"}],w=[{id:0,title:"Jaminan Penawaran",name:"dok_jaminan_penawaran"},{id:2,title:"Surat Penawaran Komersial",name:"dok_penawaran_komersial"}],N=()=>{const{slug:e}=(0,l.UO)(),[t,n]=(0,s.useState)(),[i,N]=(0,s.useState)({}),[O,S]=(0,s.useState)([]),[P,z]=(0,s.useState)(),[U,C]=(0,s.useState)(),[D,E]=(0,s.useState)(),[R,F]=(0,s.useState)(!1),[M,q]=(0,s.useState)(!1),[T,J]=(0,s.useState)(!1),[K,I]=(0,s.useState)(!1),L=(0,g.Z)(),{data:A,refetch:B}=(0,y.a)({queryKey:["tender-detail"],queryFn:()=>L.get("vapi/tender/peserta/".concat(e)).then((e=>e.data.data))});(0,s.useEffect)((()=>{N((null===A||void 0===A?void 0:A.centang_dok_wajib)&&JSON.parse(null===A||void 0===A?void 0:A.centang_dok_wajib)),n(null===A||void 0===A?void 0:A.id_tender)}),[A]),(0,s.useEffect)((()=>{S(i&&Object.keys(i))}),[i]),(0,s.useEffect)((()=>{const e=null===O||void 0===O?void 0:O.filter((e=>null!==A[e])),t=null===O||void 0===O?void 0:O.filter((e=>!0===i[e]));J(JSON.stringify(e)===JSON.stringify(t))}),[O,i]);const H=(e,t,n)=>{z(t),C(n),(0,k.Z)(e.target.files[0]).then((t=>E({key:e.target.id,file:t.split(",")[1]}))).catch((()=>E()))},Q=async e=>{e.preventDefault(),F(!0),void 0!==D?(D.tender_id=t,await L.post("vapi/tender/upload/dokumen",D).then((()=>{B(),(0,v.Z)("success","Dokumen ".concat(U," berhasil diupload."))})).catch((()=>{(0,v.Z)("error","Something went wrong.")}))):(0,v.Z)("error","Tidak ada file yang dipilih."),E(),z(),F(!1)};return(0,_.jsx)(o.Z,{className:"rounded-4",children:(0,_.jsxs)(d.Z,{children:[(0,_.jsxs)(c.Z,{children:[(0,_.jsx)(u.Z,{md:"8",children:(0,_.jsx)(m.Z,{tag:"h4",children:null===A||void 0===A?void 0:A.nama_tender})}),(0,_.jsx)(u.Z,{md:"4"})]}),(0,_.jsx)("small",{children:null===A||void 0===A?void 0:A.sistem_kualifikasi}),"lulus_tahap_1"===(null===A||void 0===A?void 0:A.status)?null===w||void 0===w?void 0:w.map((e=>(0,_.jsx)(c.Z,{children:(0,_.jsx)(p.Z,{onSubmit:Q,children:null===O||void 0===O?void 0:O.map((t=>!0===i[t]&&e.name===t&&(null===A[t]?(0,_.jsx)(f.Z,{children:(0,_.jsxs)(c.Z,{className:"mt-3",children:[(0,_.jsxs)(u.Z,{md:"10",children:[(0,_.jsx)(h.Z,{htmlFor:t,children:e.title}),(0,_.jsx)(x.Z,{type:"file",id:t,name:t,onChange:t=>H(t,e.id,e.title),accept:"application/pdf"}),(0,_.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,_.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,_.jsx)("i",{children:e.template&&(0,_.jsx)(r.rU,{to:e.doc_file,className:"text-decoration-none",target:"_blank",children:(0,_.jsx)("small",{children:"*Download template"})})})]})]}),(0,_.jsx)(u.Z,{md:"2 d-flex align-items-center pt-2",children:R&&e.id===P?(0,_.jsx)(j.Z,{type:"button",color:"dark",size:"sm",disabled:!0,children:(0,_.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,_.jsx)(b.Z,{size:"sm"}),"Uploading.."]})}):(0,_.jsx)(j.Z,{type:"submit",size:"sm",color:"dark",required:!0,disabled:e.id!==P,children:"Upload"})})]})},t):P===e.id&&M?(0,_.jsx)(f.Z,{children:(0,_.jsxs)(c.Z,{className:"mt-3",children:[(0,_.jsxs)(u.Z,{md:"10",children:[(0,_.jsxs)(h.Z,{htmlFor:t,children:["Edit Dokumen ",e.title]}),(0,_.jsx)(x.Z,{type:"file",id:t,name:t,onChange:t=>H(t,e.id,e.title),accept:"application/pdf"}),(0,_.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,_.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,_.jsx)("i",{children:e.template&&(0,_.jsx)(r.rU,{to:e.doc_file,className:"text-decoration-none",target:"_blank",children:(0,_.jsx)("small",{children:"*Download template"})})})]})]}),(0,_.jsx)(u.Z,{md:"2 d-flex align-items-center pt-2",children:R&&e.id===P?(0,_.jsx)(j.Z,{type:"button",color:"dark",size:"sm",disabled:!0,children:(0,_.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,_.jsx)(b.Z,{size:"sm"}),"Uploading.."]})}):(0,_.jsxs)("div",{className:"d-flex gap-2",children:[(0,_.jsx)(j.Z,{type:"submit",size:"sm",color:"secondary",outline:!0,onClick:()=>{q(!1),z()},children:"Cancel"}),(0,_.jsx)(j.Z,{type:"submit",size:"sm",color:"dark",required:!0,disabled:e.id!==P,children:"Upload"})]})})]})},t):(0,_.jsx)(f.Z,{className:"bg-light rounded-4 px-3 pb-2 pt-1",children:(0,_.jsx)(c.Z,{className:"mt-3",children:(0,_.jsxs)(u.Z,{md:"10",children:[(0,_.jsx)(h.Z,{htmlFor:t,children:e.title}),(0,_.jsxs)("div",{className:"d-flex gap-4",children:[(0,_.jsx)(r.rU,{to:"",children:A[t].split("/")[3]}),"submit_dokumen"!==(null===A||void 0===A?void 0:A.status)&&(0,_.jsx)("abbr",{title:"Edit Dokumen",children:(0,_.jsx)("button",{className:"text-muted",type:"button",style:{border:"none",background:"none"},onClick:()=>{q(!0),z(e.id)},children:(0,_.jsx)(a(),{icon:"edit",style:{fontSize:"20px"}})})})]})]})})},t))))})},e.id))):null===Z||void 0===Z?void 0:Z.map((e=>(0,_.jsx)(c.Z,{children:(0,_.jsx)(p.Z,{onSubmit:Q,children:null===O||void 0===O?void 0:O.map((t=>!0===i[t]&&e.name===t&&(null===A[t]?(0,_.jsx)(f.Z,{children:(0,_.jsxs)(c.Z,{className:"mt-3",children:[(0,_.jsxs)(u.Z,{md:"10",children:[(0,_.jsx)(h.Z,{htmlFor:t,children:e.title}),(0,_.jsx)(x.Z,{type:"file",id:t,name:t,onChange:t=>H(t,e.id,e.title),accept:"application/pdf"}),(0,_.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,_.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,_.jsx)("i",{children:e.template&&(0,_.jsx)(r.rU,{to:e.doc_file,className:"text-decoration-none",target:"_blank",children:(0,_.jsx)("small",{children:"*Download template"})})})]})]}),(0,_.jsx)(u.Z,{md:"2 d-flex align-items-center pt-2",children:R&&e.id===P?(0,_.jsx)(j.Z,{type:"button",color:"dark",size:"sm",disabled:!0,children:(0,_.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,_.jsx)(b.Z,{size:"sm"}),"Uploading.."]})}):(0,_.jsx)(j.Z,{type:"submit",size:"sm",color:"dark",required:!0,disabled:e.id!==P,children:"Upload"})})]})},t):P===e.id&&M?(0,_.jsx)(f.Z,{children:(0,_.jsxs)(c.Z,{className:"mt-3",children:[(0,_.jsxs)(u.Z,{md:"10",children:[(0,_.jsxs)(h.Z,{htmlFor:t,children:["Edit Dokumen ",e.title]}),(0,_.jsx)(x.Z,{type:"file",id:t,name:t,onChange:t=>H(t,e.id,e.title),accept:"application/pdf"}),(0,_.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,_.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,_.jsx)("i",{children:e.template&&(0,_.jsx)(r.rU,{to:e.doc_file,className:"text-decoration-none",target:"_blank",children:(0,_.jsx)("small",{children:"*Download template"})})})]})]}),(0,_.jsx)(u.Z,{md:"2 d-flex align-items-center pt-2",children:R&&e.id===P?(0,_.jsx)(j.Z,{type:"button",color:"dark",size:"sm",disabled:!0,children:(0,_.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,_.jsx)(b.Z,{size:"sm"}),"Uploading.."]})}):(0,_.jsxs)("div",{className:"d-flex gap-2",children:[(0,_.jsx)(j.Z,{type:"submit",size:"sm",color:"secondary",outline:!0,onClick:()=>{q(!1),z()},children:"Cancel"}),(0,_.jsx)(j.Z,{type:"submit",size:"sm",color:"dark",required:!0,disabled:e.id!==P,children:"Upload"})]})})]})},t):(0,_.jsx)(f.Z,{className:"bg-light rounded-4 px-3 pb-2 pt-1",children:(0,_.jsx)(c.Z,{className:"mt-3",children:(0,_.jsxs)(u.Z,{md:"10",children:[(0,_.jsx)(h.Z,{htmlFor:t,children:e.title}),(0,_.jsxs)("div",{className:"d-flex gap-4",children:[(0,_.jsx)(r.rU,{to:"",children:A[t].split("/")[3]}),"submit_dokumen"!==(null===A||void 0===A?void 0:A.status)&&(0,_.jsx)("abbr",{title:"Edit Dokumen",children:(0,_.jsx)("button",{className:"text-muted",type:"button",style:{border:"none",background:"none"},onClick:()=>{q(!0),z(e.id)},children:(0,_.jsx)(a(),{icon:"edit",style:{fontSize:"20px"}})})})]})]})})},t))))})},e.id))),(0,_.jsx)("hr",{}),(0,_.jsx)(f.Z,{className:"d-flex justify-content-end",children:K?(0,_.jsx)(j.Z,{type:"button",color:"primary",size:"sm",children:(0,_.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,_.jsx)(b.Z,{size:"sm"}),"Mengirim.."]})}):"submit_dokumen"===(null===A||void 0===A?void 0:A.status)?(0,_.jsxs)(j.Z,{type:"button",color:"success",className:"me-2 d-flex gap-2 align-items-center",size:"sm",disabled:!0,children:[(0,_.jsx)(a(),{icon:"check"}),"Submitted"]}):(0,_.jsxs)(j.Z,{type:"button",color:"primary",className:"me-2 d-flex gap-2 align-items-center",size:"sm",disabled:!T,onClick:async()=>{I(!0),await L.get("vapi/tender/submit-dokumen/".concat(null===A||void 0===A?void 0:A.id_peserta)).then((()=>{B(),(0,v.Z)("success","Dokumen tender berhasil dikirim.")})).catch((()=>{(0,v.Z)("error","Something went wrong.")})),I(!1)},children:[(0,_.jsx)(a(),{icon:"send"}),"Submit Dokumen"]})})]})})}},7493:(e,t,n)=>{n.d(t,{Z:()=>i});const i=e=>new Promise((t=>{let n="";const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{n=i.result,t(n)}}))},4448:(e,t,n)=>{n.d(t,{Z:()=>f});var i=n(2791),a=n(2007),s=n.n(a),l=n(1418),r=n.n(l),o=n(9622),d=["className","cssModule","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m={className:s().string,cssModule:s().object,tag:o.iC};function p(e){var t=e.className,n=e.cssModule,a=e.tag,s=void 0===a?"div":a,l=u(e,d),m=(0,o.mx)(r()(t,"card-title"),n);return i.createElement(s,c({},l,{className:m}))}p.propTypes=m;const f=p},9399:(e,t,n)=>{n.d(t,{Z:()=>b});var i=n(2791),a=n(2007),s=n.n(a),l=n(9622);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o=["className","cssModule","tag","innerRef"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var x={children:s().node,tag:l.iC,innerRef:s().oneOfType([s().object,s().func,s().string]),className:s().string,cssModule:s().object},j=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(r,e);var t,n,a,s=p(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=s.call(this,e)).getRef=t.getRef.bind(f(t)),t.submit=t.submit.bind(f(t)),t}return t=r,(n=[{key:"getRef",value:function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}},{key:"submit",value:function(){this.ref&&this.ref.submit()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cssModule,a=e.tag,s=void 0===a?"form":a,r=e.innerRef,u=c(e,o),m=(0,l.mx)(t,n);return i.createElement(s,d({},u,{ref:r,className:m}))}}])&&u(t.prototype,n),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.Component);j.propTypes=x;const b=j}}]);
//# sourceMappingURL=230.42159594.chunk.js.map