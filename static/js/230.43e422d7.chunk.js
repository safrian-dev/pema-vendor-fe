"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[230],{977:(e,a,i)=>{i.d(a,{F:()=>s,Z:()=>l});i(2791);var t=i(5218),n=i(184);const s=()=>(0,n.jsx)(t.x7,{toastOptions:{className:"",style:{}}}),l=(e,a)=>{((e,a)=>{"success"===e?t.ZP.success(a):"create"===e?(0,t.ZP)(a,{icon:"\ud83e\udd17"}):"start"===e?(0,t.ZP)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,t.ZP)("Horeee, task done!",{icon:"\ud83d\udc4f"}):t.ZP.error(a)})(e,a)}},2230:(e,a,i)=>{i.r(a),i.d(a,{default:()=>y});var t=i(690),n=i.n(t),s=i(2791),l=i(7689),d=i(1087),r=i(3464),o=i(9037),c=i(3009),m=i(9773),p=i(4448),u=i(9399),x=i(6167),h=i(2976),j=i(8118),f=i(9127),k=i(4828),b=i(8404),g=i(4323),Z=i(977),_=i(7493),v=i(184);const y=()=>{const{slug:e}=(0,l.UO)(),[a,i]=(0,s.useState)(),[t,y]=(0,s.useState)({}),[N,w]=(0,s.useState)([]),[S,P]=(0,s.useState)(),[z,U]=(0,s.useState)(),[O,C]=(0,s.useState)(),[D,F]=(0,s.useState)(!1),[E,q]=(0,s.useState)(!1),[J,K]=(0,s.useState)(!1),[M,L]=(0,s.useState)(!1),I=(0,g.Z)(),{data:T,refetch:A}=(0,b.a)({queryKey:["tender-detail"],queryFn:()=>I.get("vapi/tender/peserta/".concat(e)).then((e=>e.data.data))}),H=[{id:0,title:"Surat Penyampaian Penawaran",name:"dok_surat_penyampaian_penawaran",template:!0,doc_file:"https://api.ptpema.co.id/vendor_file/tender/".concat(null===T||void 0===T?void 0:T.id_tender,"/doc_penyampaian_penawaran.pdf")},{id:1,title:"Formulir Isian Kualifikasi",name:"dok_formulir_isian_kualifikasi",template:!0,doc_file:"https://api.ptpema.co.id/vendor_file/templates/data_kualifikasi.docx"},{id:2,title:"Fakta Integritas",name:"dok_fakta_integritas",template:!0,doc_file:"https://api.ptpema.co.id/vendor_file/templates/fakta_integritas.docx"},{id:3,title:"HSE Plan",name:"dok_hse_plan"},{id:4,title:"Jaminan Penawaran",name:"dok_jaminan_penawaran"},{id:5,title:"Kelengkapan Izin Usaha",name:"dok_kelengkapan_izin_usaha"},{id:6,title:"List Peralatan",name:"dok_list_peralatan"},{id:7,title:"List Man Power + CV",name:"dok_listmanpower_plus_cv"},{id:8,title:"Metode Pelaksanaan (Jasa)",name:"dok_metode_pelaksanaan"},{id:9,title:"Surat Penawaran Komersial",name:"dok_penawaran_komersial"},{id:10,title:"Perhitungan TKDN",name:"dok_perhitungan_tkdn"},{id:11,title:"QA/QC Plan",name:"dok_qaqc_plan"},{id:12,title:"Schedule Pekerjaan",name:"dok_schedule_pekerjaan"},{id:13,title:"Struktur Organisasi Pekerjaan",name:"dok_struktur_organisasi_pekerjaan"},{id:14,title:"*Dokumen Wajib Lainnya",name:"dok_wajib_lainnya"}],Q=[{id:0,title:"Jaminan Penawaran",name:"dok_jaminan_penawaran"},{id:2,title:"Surat Penawaran Komersial",name:"dok_penawaran_komersial"}];(0,s.useEffect)((()=>{y((null===T||void 0===T?void 0:T.centang_dok_wajib)&&JSON.parse(null===T||void 0===T?void 0:T.centang_dok_wajib)),i(null===T||void 0===T?void 0:T.id_tender)}),[T]),(0,s.useEffect)((()=>{w(t&&Object.keys(t))}),[t]),(0,s.useEffect)((()=>{const e=null===N||void 0===N?void 0:N.filter((e=>null!==T[e])),a=null===N||void 0===N?void 0:N.filter((e=>!0===t[e]));K(JSON.stringify(e)===JSON.stringify(a))}),[N,t]);const R=(e,a,i)=>{P(a),U(i),(0,_.Z)(e.target.files[0]).then((a=>C({key:e.target.id,file:a.split(",")[1]}))).catch((()=>C()))},V=async e=>{e.preventDefault(),F(!0),void 0!==O?(O.tender_id=a,await I.post("vapi/tender/upload/dokumen",O).then((()=>{A(),(0,Z.Z)("success","Dokumen ".concat(z," berhasil diupload."))})).catch((()=>{(0,Z.Z)("error","Something went wrong.")}))):(0,Z.Z)("error","Tidak ada file yang dipilih."),C(),P(),F(!1)};return(0,v.jsx)(r.Z,{className:"rounded-4",children:(0,v.jsxs)(o.Z,{children:[(0,v.jsxs)(c.Z,{children:[(0,v.jsx)(m.Z,{md:"8",children:(0,v.jsx)(p.Z,{tag:"h4",children:null===T||void 0===T?void 0:T.nama_tender})}),(0,v.jsx)(m.Z,{md:"4"})]}),(0,v.jsx)("small",{children:null===T||void 0===T?void 0:T.sistem_kualifikasi}),"lulus_tahap_1"===(null===T||void 0===T?void 0:T.status)?null===Q||void 0===Q?void 0:Q.map((e=>(0,v.jsx)(c.Z,{children:(0,v.jsx)(u.Z,{onSubmit:V,children:null===N||void 0===N?void 0:N.map((a=>!0===t[a]&&e.name===a&&(null===T[a]?(0,v.jsx)(x.Z,{children:(0,v.jsxs)(c.Z,{className:"mt-3",children:[(0,v.jsxs)(m.Z,{md:"10",children:[(0,v.jsx)(h.Z,{htmlFor:a,children:e.title}),(0,v.jsx)(j.Z,{type:"file",id:a,name:a,onChange:a=>R(a,e.id,e.title),accept:"application/pdf"}),(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,v.jsx)("i",{children:e.template&&(0,v.jsx)(d.rU,{to:e.doc_file,className:"text-decoration-none",target:"_blank",children:(0,v.jsx)("small",{children:"*Download template"})})})]})]}),(0,v.jsx)(m.Z,{md:"2 d-flex align-items-center pt-2",children:D&&e.id===S?(0,v.jsx)(f.Z,{type:"button",color:"dark",size:"sm",disabled:!0,children:(0,v.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,v.jsx)(k.Z,{size:"sm"}),"Uploading.."]})}):(0,v.jsx)(f.Z,{type:"submit",size:"sm",color:"dark",required:!0,disabled:e.id!==S,children:"Upload"})})]})},a):S===e.id&&E?(0,v.jsx)(x.Z,{children:(0,v.jsxs)(c.Z,{className:"mt-3",children:[(0,v.jsxs)(m.Z,{md:"10",children:[(0,v.jsxs)(h.Z,{htmlFor:a,children:["Edit Dokumen ",e.title]}),(0,v.jsx)(j.Z,{type:"file",id:a,name:a,onChange:a=>R(a,e.id,e.title),accept:"application/pdf"}),(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,v.jsx)("i",{children:e.template&&(0,v.jsx)(d.rU,{to:e.doc_file,className:"text-decoration-none",target:"_blank",children:(0,v.jsx)("small",{children:"*Download template"})})})]})]}),(0,v.jsx)(m.Z,{md:"2 d-flex align-items-center pt-2",children:D&&e.id===S?(0,v.jsx)(f.Z,{type:"button",color:"dark",size:"sm",disabled:!0,children:(0,v.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,v.jsx)(k.Z,{size:"sm"}),"Uploading.."]})}):(0,v.jsxs)("div",{className:"d-flex gap-2",children:[(0,v.jsx)(f.Z,{type:"submit",size:"sm",color:"secondary",outline:!0,onClick:()=>{q(!1),P()},children:"Cancel"}),(0,v.jsx)(f.Z,{type:"submit",size:"sm",color:"dark",required:!0,disabled:e.id!==S,children:"Upload"})]})})]})},a):(0,v.jsx)(x.Z,{className:"bg-light rounded-4 px-3 pb-2 pt-1",children:(0,v.jsx)(c.Z,{className:"mt-3",children:(0,v.jsxs)(m.Z,{md:"10",children:[(0,v.jsx)(h.Z,{htmlFor:a,children:e.title}),(0,v.jsxs)("div",{className:"d-flex gap-4",children:[(0,v.jsx)(d.rU,{to:"",children:T[a].split("/")[3]}),"submit_dokumen"!==(null===T||void 0===T?void 0:T.status)&&(0,v.jsx)("abbr",{title:"Edit Dokumen",children:(0,v.jsx)("button",{className:"text-muted",type:"button",style:{border:"none",background:"none"},onClick:()=>{q(!0),P(e.id)},children:(0,v.jsx)(n(),{icon:"edit",style:{fontSize:"20px"}})})})]})]})})},a))))})},e.id))):null===H||void 0===H?void 0:H.map((e=>(0,v.jsx)(c.Z,{children:(0,v.jsx)(u.Z,{onSubmit:V,children:null===N||void 0===N?void 0:N.map((a=>!0===t[a]&&e.name===a&&(null===T[a]?(0,v.jsx)(x.Z,{children:(0,v.jsxs)(c.Z,{className:"mt-3",children:[(0,v.jsxs)(m.Z,{md:"10",children:[(0,v.jsx)(h.Z,{htmlFor:a,children:e.title}),(0,v.jsx)(j.Z,{type:"file",id:a,name:a,onChange:a=>R(a,e.id,e.title),accept:"application/pdf"}),(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,v.jsx)("i",{children:e.template&&(0,v.jsx)(d.rU,{to:e.doc_file,className:"text-decoration-none",target:"_blank",children:(0,v.jsx)("small",{children:"*Download template"})})})]})]}),(0,v.jsx)(m.Z,{md:"2 d-flex align-items-center pt-2",children:D&&e.id===S?(0,v.jsx)(f.Z,{type:"button",color:"dark",size:"sm",disabled:!0,children:(0,v.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,v.jsx)(k.Z,{size:"sm"}),"Uploading.."]})}):(0,v.jsx)(f.Z,{type:"submit",size:"sm",color:"dark",required:!0,disabled:e.id!==S,children:"Upload"})})]})},a):S===e.id&&E?(0,v.jsx)(x.Z,{children:(0,v.jsxs)(c.Z,{className:"mt-3",children:[(0,v.jsxs)(m.Z,{md:"10",children:[(0,v.jsxs)(h.Z,{htmlFor:a,children:["Edit Dokumen ",e.title]}),(0,v.jsx)(j.Z,{type:"file",id:a,name:a,onChange:a=>R(a,e.id,e.title),accept:"application/pdf"}),(0,v.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,v.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,v.jsx)("i",{children:e.template&&(0,v.jsx)(d.rU,{to:e.doc_file,className:"text-decoration-none",target:"_blank",children:(0,v.jsx)("small",{children:"*Download template"})})})]})]}),(0,v.jsx)(m.Z,{md:"2 d-flex align-items-center pt-2",children:D&&e.id===S?(0,v.jsx)(f.Z,{type:"button",color:"dark",size:"sm",disabled:!0,children:(0,v.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,v.jsx)(k.Z,{size:"sm"}),"Uploading.."]})}):(0,v.jsxs)("div",{className:"d-flex gap-2",children:[(0,v.jsx)(f.Z,{type:"submit",size:"sm",color:"secondary",outline:!0,onClick:()=>{q(!1),P()},children:"Cancel"}),(0,v.jsx)(f.Z,{type:"submit",size:"sm",color:"dark",required:!0,disabled:e.id!==S,children:"Upload"})]})})]})},a):(0,v.jsx)(x.Z,{className:"bg-light rounded-4 px-3 pb-2 pt-1",children:(0,v.jsx)(c.Z,{className:"mt-3",children:(0,v.jsxs)(m.Z,{md:"10",children:[(0,v.jsx)(h.Z,{htmlFor:a,children:e.title}),(0,v.jsxs)("div",{className:"d-flex gap-4",children:[(0,v.jsx)(d.rU,{to:"",children:T[a].split("/")[3]}),"submit_dokumen"!==(null===T||void 0===T?void 0:T.status)&&(0,v.jsx)("abbr",{title:"Edit Dokumen",children:(0,v.jsx)("button",{className:"text-muted",type:"button",style:{border:"none",background:"none"},onClick:()=>{q(!0),P(e.id)},children:(0,v.jsx)(n(),{icon:"edit",style:{fontSize:"20px"}})})})]})]})})},a))))})},e.id))),(0,v.jsx)("hr",{}),(0,v.jsx)(x.Z,{className:"d-flex justify-content-end",children:M?(0,v.jsx)(f.Z,{type:"button",color:"primary",size:"sm",children:(0,v.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,v.jsx)(k.Z,{size:"sm"}),"Mengirim.."]})}):"submit_dokumen"===(null===T||void 0===T?void 0:T.status)?(0,v.jsxs)(f.Z,{type:"button",color:"success",className:"me-2 d-flex gap-2 align-items-center",size:"sm",disabled:!0,children:[(0,v.jsx)(n(),{icon:"check"}),"Submitted"]}):(0,v.jsxs)(f.Z,{type:"button",color:"primary",className:"me-2 d-flex gap-2 align-items-center",size:"sm",disabled:!J,onClick:async()=>{L(!0),await I.get("vapi/tender/submit-dokumen/".concat(null===T||void 0===T?void 0:T.id_peserta)).then((()=>{A(),(0,Z.Z)("success","Dokumen tender berhasil dikirim.")})).catch((()=>{(0,Z.Z)("error","Something went wrong.")})),L(!1)},children:[(0,v.jsx)(n(),{icon:"send"}),"Submit Dokumen"]})})]})})}},7493:(e,a,i)=>{i.d(a,{Z:()=>t});const t=e=>new Promise((a=>{let i="";const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{i=t.result,a(i)}}))},4448:(e,a,i)=>{i.d(a,{Z:()=>x});var t=i(2791),n=i(2007),s=i.n(n),l=i(1418),d=i.n(l),r=i(9622),o=["className","cssModule","tag"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},c.apply(this,arguments)}function m(e,a){if(null==e)return{};var i,t,n=function(e,a){if(null==e)return{};var i,t,n={},s=Object.keys(e);for(t=0;t<s.length;t++)i=s[t],a.indexOf(i)>=0||(n[i]=e[i]);return n}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)i=s[t],a.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var p={className:s().string,cssModule:s().object,tag:r.iC};function u(e){var a=e.className,i=e.cssModule,n=e.tag,s=void 0===n?"div":n,l=m(e,o),p=(0,r.mx)(d()(a,"card-title"),i);return t.createElement(s,c({},l,{className:p}))}u.propTypes=p;const x=u}}]);
//# sourceMappingURL=230.43e422d7.chunk.js.map