"use strict";(self.webpackChunkmaterialpro_main=self.webpackChunkmaterialpro_main||[]).push([[269],{977:(e,a,s)=>{s.d(a,{F:()=>i,Z:()=>l});s(2791);var n=s(5218),t=s(184);const i=()=>(0,t.jsx)(n.x7,{toastOptions:{className:"",style:{}}}),l=(e,a)=>{((e,a)=>{"success"===e?n.ZP.success(a):"create"===e?(0,n.ZP)(a,{icon:"\ud83e\udd17"}):"start"===e?(0,n.ZP)("Lets get started, cheer up!",{icon:"\ud83d\udcaa"}):"done"===e?(0,n.ZP)("Horeee, task done!",{icon:"\ud83d\udc4f"}):n.ZP.error(a)})(e,a)}},7269:(e,a,s)=>{s.r(a),s.d(a,{default:()=>K});var n=s(2791),t=s(3009),i=s(9773),l=s(3464),r=s(9037),d=s(7569),c=s(690),o=s.n(c),h=s(9399),m=s(6167),x=s(2976),u=s(8118),j=s(9127),p=s(4828),g=s(9504),Z=s.n(g),f=s(1087),b=s(8404),y=s(4323),v=s(977),k=s(184);const N=e=>{let{setActiveStep:a,generalIsDone:s,setGeneralIsDone:c}=e;const[g,N]=(0,n.useState)(),[S,w]=(0,n.useState)(!1),[_,P]=(0,n.useState)({}),[C,D]=(0,n.useState)(""),[F,z]=(0,n.useState)(),[A,U]=(0,n.useState)(),[T,M]=(0,n.useState)([]),[I,B]=(0,n.useState)(!1),[K,L]=(0,n.useState)(!1),q=(0,y.Z)(),E="https://api.ptpema.co.id/",{isLoading:J,error:G,data:R}=(0,b.a)({queryKey:["general"],queryFn:()=>q.get("vapi/perusahaan/data-umum").then((e=>{var a;return null!==(null===(a=e.data.data)||void 0===a?void 0:a.email_alternatif)&&c(!0),e.data.data}))});(0,n.useEffect)((()=>{!async function(){await fetch("https://api.goapi.io/regional/provinsi?api_key=fb5373cf-3862-580f-a71c-f2aadaf7").then((e=>e.json())).then((e=>M(e.data))).catch((e=>console.log(e)))}()}),[]),(0,n.useEffect)((()=>{P(R),z(null===R||void 0===R?void 0:R.file_pvd),U(null===R||void 0===R?void 0:R.file_npwp)}),[R]),(0,n.useEffect)((()=>{!async function(){await q.get("vapi/perusahaan/list-bidang-usaha").then((e=>{N(e.data.data)})).catch((e=>console.log(e)))}()}),[]);const V=e=>{P((a=>({...a,[e.target.id]:e.target.value})))},W=e=>new Promise((a=>{let s="";const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{s=n.result,a(s)}})),O=e=>{W(e.target.files[0]).then((e=>{z(e.split(",")[1])})).catch((e=>{console.log(e)}))};return console.log(_),(0,k.jsxs)(k.Fragment,{children:[C&&(0,k.jsxs)(d.Z,{className:"rounded-4 d-flex justify-content-between",color:"danger",children:[C,(0,k.jsx)(o(),{icon:"close",onClick:()=>D(!C)})]}),(0,k.jsx)(t.Z,{lg:"12",className:"justify-content-center",children:(0,k.jsx)(i.Z,{lg:"12",children:(0,k.jsx)(l.Z,{className:"rounded-4 w-100",children:J?(0,k.jsx)(r.Z,{children:"Loading..."}):G?(0,k.jsx)(r.Z,{children:"Something went wrong."}):(0,k.jsxs)(r.Z,{children:[(0,k.jsx)("h4",{className:"fw-bold",children:"Data Umum Perusahaan"}),(0,k.jsxs)(h.Z,{onSubmit:async e=>{e.preventDefault(),w(!0),_.filePvd=F,_.fileNpwp=A,await q.post("vapi/perusahaan/store",_).then((()=>{c(!0),(0,v.Z)("success","Data umum perusahaan berhasil disimpan."),a(2)})).catch((e=>{console.log(e),(0,v.Z)("error","Something went wrong."),D(e.response.data.message)})),w(!1)},children:[(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"7",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"nama_perusahaan",children:"Nama Perusahaan"}),(0,k.jsx)(u.Z,{type:"text",id:"nama_perusahaan",name:"nama_perusahaan",value:(null===_||void 0===_?void 0:_.nama_perusahaan)||"",className:"form-control",onChange:e=>V(e)})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"5",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"uniqueId",children:"Unique ID"}),(0,k.jsx)(u.Z,{type:"text",id:"uniqueId",name:"uniqueId",placeholder:"Auto Generated",value:(null===_||void 0===_?void 0:_.nomor_registrasi)||"",disabled:!0,onChange:e=>V(e)})]})})]}),(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"7",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"tipePenyedia",children:"Bidang Usaha"}),(0,k.jsxs)(u.Z,{type:"select",id:"tipePenyedia",name:"tipePenyedia",className:"form-control",value:(null===_||void 0===_?void 0:_.tipe)||"",onChange:e=>V(e),children:[(0,k.jsx)("option",{value:"",disabled:!0,children:"- Pilih -"}),(0,k.jsx)("option",{value:"Barang",children:"Barang"}),(0,k.jsx)("option",{value:"Jasa",children:"Jasa"}),(0,k.jsx)("option",{value:"Barang dan Jasa",children:"Barang dan Jasa"})]})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"5",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"bentukPerusahaan",children:"Bentuk Perusahaan"}),(0,k.jsxs)(u.Z,{type:"select",id:"bentukPerusahaan",name:"bentukPerusahaan",className:"form-control",value:(null===R||void 0===R?void 0:R.bentuk_usaha)||"",onChange:e=>V(e),children:[(0,k.jsx)("option",{value:"",disabled:!0,children:"- Pilih -"}),(0,k.jsx)("option",{value:"PT",children:"PT"}),(0,k.jsx)("option",{value:"CV",children:"CV"}),(0,k.jsx)("option",{value:"Firma",children:"Firma"})]})]})})]}),(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"7",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"email_alternatif",children:"Email Perusahaan"}),(0,k.jsx)(u.Z,{type:"email_alternatif",id:"email_alternatif",name:"email_alternatif",className:"form-control",value:(null===_||void 0===_?void 0:_.email_alternatif)||"",onChange:V})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"5",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"no_npwp",children:"NPWP"}),(0,k.jsx)(Z(),{mask:"99.999.999.9-999.999",type:"text",id:"no_npwp",name:"no_npwp",className:"form-control",value:(null===_||void 0===_?void 0:_.no_npwp)||"",onChange:V})]})})]}),(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"7",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"id_bidang",children:"Bidang Usaha"}),(0,k.jsxs)(u.Z,{type:"select",id:"id_bidang",name:"id_bidang",className:"form-control",value:(null===_||void 0===_?void 0:_.id_bidang)||"",onChange:V,children:[(0,k.jsx)("option",{value:"",children:"- Pilih -"}),null===g||void 0===g?void 0:g.map((e=>(0,k.jsx)("option",{value:e.id_bidang,children:e.nama_bidang},e.id_bidang)))]})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"5",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"hp",children:"Kontak (Aktif WhatsApp)"}),(0,k.jsx)(Z(),{className:"form-control",mask:"+62\\   999 9999 9999",type:"text",id:"hp",name:"hp",value:(null===_||void 0===_?void 0:_.hp)||"",onChange:V})]})})]}),(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"7",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"alamat",children:"Alamat Perusahaan"}),(0,k.jsx)(u.Z,{type:"textarea",id:"alamat",name:"alamat",className:"form-control",value:(null===_||void 0===_?void 0:_.alamat)||"",onChange:V})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"5",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"provinsi",children:"Provinsi"}),(0,k.jsxs)(u.Z,{type:"select",id:"provinsi",name:"provinsi",className:"form-control",value:(null===_||void 0===_?void 0:_.provinsi)||"",onChange:V,children:[(0,k.jsx)("option",{value:"",disabled:!0,children:"- Pilih -"}),null===T||void 0===T?void 0:T.map((e=>(0,k.jsx)("option",{value:e.name,children:e.name},e.id)))]})]})})]}),(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"7",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"filePvd",children:"Surat penunjukkan Penanggungjawab Akun PVD"}),"-"===(null===R||void 0===R?void 0:R.file_pvd)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(u.Z,{type:"file",id:"filePvd",name:"filePvd",className:"form-control",accept:"application/pdf",onChange:e=>O(e)}),(0,k.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,k.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,k.jsx)("small",{children:(0,k.jsx)("i",{children:(0,k.jsx)(f.rU,{to:"".concat(E,"vendor_file/templates/pvd.docx"),className:"text-decoration-none",target:"_blank",children:"*Download template surat"})})})]})]}):(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{md:"11",children:I?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(u.Z,{type:"file",id:"filePvd",name:"filePvd",className:"form-control",accept:"application/pdf",onChange:e=>O(e)}),(0,k.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,k.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,k.jsx)("small",{children:(0,k.jsx)("i",{children:(0,k.jsx)(f.rU,{to:"".concat(E,"vendor_file/templates/pvd.docx"),className:"text-decoration-none",target:"_blank",children:"*Download template surat"})})})]})]}):(0,k.jsx)(f.rU,{to:"/preview?data=general&doc=".concat(null===_||void 0===_?void 0:_.pvd_base64),target:"_blank",children:(0,k.jsx)(j.Z,{type:"button",size:"sm",color:"light",children:"Preview File PVD"})})}),(0,k.jsx)(i.Z,{md:"1",children:(0,k.jsx)("button",{type:"button",style:{border:"none",background:"none"},children:(0,k.jsx)(o(),{icon:"".concat(I?"close":"edit"),onClick:()=>{B(!I)},className:"text-muted",style:{fontSize:"20px"}})})})]})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"5",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"fileNpwp",children:"Upload NPWP "}),"-"===(null===R||void 0===R?void 0:R.file_npwp)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(u.Z,{type:"file",id:"filePvd",name:"filePvd",className:"form-control",accept:"application/pdf",onChange:e=>O(e)}),(0,k.jsx)("div",{className:"d-flex justify-content-between",children:(0,k.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"})})]}):(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{md:"10",children:K?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(u.Z,{type:"file",id:"fileNpwp",name:"fileNpwp",className:"form-control",onChange:e=>(e=>{W(e.target.files[0]).then((e=>{U(e.split(",")[1])})).catch((e=>{console.log(e)}))})(e),accept:"application/pdf"}),(0,k.jsx)("div",{className:"d-flex justify-content-between",children:(0,k.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"})})]}):(0,k.jsx)(f.rU,{to:"/preview?data=general&doc=".concat(null===_||void 0===_?void 0:_.npwp_base64),target:"_blank",children:(0,k.jsx)(j.Z,{type:"button",size:"sm",color:"light",children:"Preview File NPWP"})})}),(0,k.jsx)(i.Z,{md:"1",children:(0,k.jsx)("button",{type:"button",style:{border:"none",background:"none"},children:(0,k.jsx)(o(),{icon:"".concat(K?"close":"edit"),onClick:()=>{L(!K)},className:"text-muted",style:{fontSize:"20px"}})})})]})]})})]}),(0,k.jsx)(m.Z,{className:"d-flex justify-content-end",children:s?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(j.Z,{type:"submit",color:"secondary",className:"me-2","aria-expanded":"false",outline:!0,children:S?(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Mengirim.."]}):"Update"}),(0,k.jsx)(j.Z,{type:"button",color:"primary",className:"me-2","aria-expanded":"false",onClick:()=>a(2),children:"Selanjutnya"})]}):(0,k.jsx)(j.Z,{type:"submit",color:"primary",className:"me-2","aria-expanded":"false",disabled:S,children:S?(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Mengirim.."]}):"Selanjutnya"})})]})]})})})})]})};var S=s(8755);const w=e=>{var a;let{setActiveStep:s,officialIsDone:c,setOfficialIsDone:g}=e;const[N,w]=(0,n.useState)(!1),[_,P]=(0,n.useState)(!1),[C,D]=(0,n.useState)(""),[F,z]=(0,n.useState)(""),[A,U]=(0,n.useState)(!1),[T,M]=(0,n.useState)(),[I,B]=(0,n.useState)(),[K,L]=(0,n.useState)(),[q,E]=(0,n.useState)(!1),[J,G]=(0,n.useState)(!1),R=(0,y.Z)(),{isLoading:V,error:W,data:O,refetch:Y}=(0,b.a)({queryKey:["jajaran"],queryFn:()=>R.get("vapi/jajaran/my").then((e=>(null!==e.data.data.struktur_filename&&g(!0),e.data.data)))}),H=e=>{B((a=>({...a,[e.target.id]:e.target.value})))},Q=e=>{const a=e.target.files[0],{type:s}=a;var n;"application/pdf"!==s?console.log("file not allowed!"):(n=a,new Promise((e=>{let a="";const s=new FileReader;s.readAsDataURL(n),s.onload=()=>{a=s.result,e(a)}}))).then((e=>{L(e.split(",")[1])})).catch((e=>{console.log(e)}))},X=async()=>{E(!0),await R.post("vapi/file/upload",{file:K,whatfile:"struktur"}).then((()=>{Y(),g(!0),s(3),(0,v.Z)("success","Data Direksi/Komisaris perusahaan berhasil disimpan"),G(!1)})).catch((()=>(0,v.Z)("error","Something went wrong."))),E(!1)};return console.log(O),(0,k.jsxs)(k.Fragment,{children:[C&&(0,k.jsxs)(d.Z,{className:"rounded-4 d-flex justify-content-between",color:"danger",children:[C,(0,k.jsx)(o(),{icon:"close",onClick:()=>D(!C)})]}),F&&(0,k.jsxs)(d.Z,{className:"rounded-4 d-flex justify-content-between",color:"success",children:[F,(0,k.jsx)(o(),{icon:"close",onClick:()=>z(!F)})]}),(0,k.jsx)(t.Z,{lg:"12",className:"justify-content-center",children:(0,k.jsx)(i.Z,{lg:"12",children:(0,k.jsx)(l.Z,{className:"rounded-4 w-100",children:(0,k.jsxs)(r.Z,{children:[(0,k.jsx)("h4",{className:"fw-bold",children:"Jajaran Direksi/Komisaris Perusahaan"}),V?"Loading..":W?"Something went wrong.":(null===O||void 0===O||null===(a=O.list)||void 0===a?void 0:a.length)>0?(0,k.jsx)(S.Z,{hover:!0,children:(0,k.jsx)("tbody",{children:O.list.map(((e,a)=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:a+1}),(0,k.jsx)("td",{style:{textAlign:"left"},children:e.nama}),(0,k.jsx)("td",{style:{textAlign:"left"},children:e.jabatan}),(0,k.jsx)("td",{style:{textAlign:"right",width:"100px"},children:A&&T===e.id?(0,k.jsx)("span",{className:"text-danger",children:"Deleting.."}):(0,k.jsx)(o(),{icon:"delete",style:{fontSize:"16px",cursor:"pointer",color:"red"},onClick:()=>(async e=>{M(e),U(!0),await R.post("vapi/jajaran/delete/".concat(e)).then((()=>{Y()})).catch((e=>console.log(e))),U(!1),M()})(e.id)})})]},e.id)))})}):(0,k.jsx)("div",{className:"d-flex justify-content-center",children:(0,k.jsx)("p",{className:"text-muted",children:"Belum ada data."})}),(0,k.jsx)("div",{className:"d-flex justify-content-end mt-2",children:N?(0,k.jsx)(j.Z,{type:"button",color:"dark",size:"sm",outline:!0,onClick:()=>w(!1),content:"center",children:"Tutup"}):(0,k.jsx)(j.Z,{className:"mb-4",type:"button",color:"dark",size:"sm",outline:!0,onClick:()=>w(!0),children:"Tambah Direksi/Komisaris"})}),N&&(0,k.jsx)(h.Z,{onSubmit:async e=>{e.preventDefault(),P(!0),await R.post("vapi/jajaran/store",I).then((()=>{z("Data direksi/komisaris berhasil disimpan."),w(!1),Y()})).catch((()=>D("Gagal menyimpan data. Silakan coba lagi."))),P(!1)},children:(0,k.jsx)(i.Z,{className:"bg-light-primary rounded-4 px-3 pt-3 mb-4 mt-2",children:(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"nama",children:"Nama"}),(0,k.jsx)(u.Z,{type:"text",id:"nama",name:"nama",className:"form-control",onChange:e=>H(e),required:!0})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"3",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"jabatan",children:"Jabatan"}),(0,k.jsx)(u.Z,{type:"text",id:"jabatan",name:"jabatan",className:"form-control",onChange:e=>H(e)})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"3",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"no_npwp_direksi",children:"Nomor NPWP"}),(0,k.jsx)(Z(),{mask:"99.999.999.9-999.999",type:"text",id:"no_npwp_direksi",name:"no_npwp_direksi",className:"form-control",onChange:e=>H(e)})]})}),(0,k.jsxs)(i.Z,{sm:"12",lg:"2",className:"d-flex flex-column gap-2",children:[(0,k.jsx)("span",{children:"\xa0"}),(0,k.jsx)(j.Z,{type:"submit","aria-expanded":"false",disabled:_,children:_?(0,k.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Mengirim.."]}):"Tambah"})]})]})})}),(0,k.jsx)(t.Z,{children:J||null===(null===O||void 0===O?void 0:O.struktur_filename)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i.Z,{md:"12",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsxs)(x.Z,{htmlFor:"strukturFile",children:[J?"Udpdate File":"Upload"," Struktur & NPWP Jajaran Direksi/Komisaris Perusahaan"]}),(0,k.jsx)(u.Z,{type:"file",id:"strukturFile",name:"strukturFile",onChange:e=>Q(e),accept:"application/pdf",required:!0}),(0,k.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,k.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,k.jsx)("small",{children:(0,k.jsx)("i",{children:(0,k.jsx)(f.rU,{to:"".concat("https://api.ptpema.co.id/","vendor_file/templates/struktur.docx"),className:"text-decoration-none",target:"_blank",children:"*Download template"})})})]})]})}),J&&(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{md:"1",children:(0,k.jsx)(j.Z,{type:"button",size:"sm",color:"secondary",outline:!0,onClick:()=>G(!1),children:"Cancel"})}),(0,k.jsx)(i.Z,{md:"1",children:(0,k.jsx)(j.Z,{type:"button",size:"sm",disabled:q,onClick:X,children:q?(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Uploading.."]}):"Upload"})})]})})]}):(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(i.Z,{md:"10",children:[(0,k.jsx)(x.Z,{children:"Struktur & NPWP Jajaran Direksi/Komisaris Perusahaan"}),(0,k.jsxs)("div",{className:"d-flex gap-5",children:[(0,k.jsx)(f.rU,{to:"/preview?data=general&doc=".concat(null===O||void 0===O?void 0:O.struktur_base64),target:"_blank",children:(0,k.jsx)(j.Z,{type:"button",size:"sm",color:"light",children:"Preview File"})}),(0,k.jsx)("button",{type:"button",style:{border:"none",background:"none"},children:(0,k.jsx)(o(),{icon:"".concat(J?"close":"edit"),onClick:()=>{G(!J)},className:"text-muted",style:{fontSize:"20px"}})})]})]})})}),(0,k.jsx)(t.Z,{children:(0,k.jsxs)(m.Z,{className:"d-flex justify-content-end",children:[(0,k.jsx)(j.Z,{type:"button",color:"primary",className:"me-2",outline:!0,onClick:()=>s(1),children:"Sebelumnya"}),c?(0,k.jsx)(j.Z,{type:"button",color:"primary",className:"me-2",onClick:()=>s(3),children:"Selanjutnya"}):(0,k.jsx)(j.Z,{type:"button",color:"primary",className:"me-2",disabled:q,onClick:X,children:q?(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Mengirim.."]}):"Simpan"})]})})]})})})})]})};var _=s(7493);const P=e=>{let{setSuccessMsg:a,setErrMsg:s}=e;const[l,r]=(0,n.useState)(),[d,c]=(0,n.useState)(),[g,Z]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),[P,C]=(0,n.useState)(!1),[D,F]=(0,n.useState)(!1),z=(0,y.Z)(),{isLoading:A,error:U,data:T,refetch:M}=(0,b.a)({queryKey:["akta"],queryFn:()=>z.get("vapi/akta/view").then((e=>e.data.data))}),I=e=>{r((a=>({...a,[e.target.id]:e.target.value})))};(0,n.useEffect)((()=>{0===(null===T||void 0===T?void 0:T.length)&&F(!0)}),[T]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h5",{children:"Akta Perusahaan"}),A?"Loading..":U?"Something went wrong.":T.length>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(S.Z,{hover:!0,responsive:!0,bordered:!0,children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:"Nomor Akta"}),(0,k.jsx)("th",{children:"Tanggal Terbit"}),(0,k.jsx)("th",{children:"Nama Notaris"}),(0,k.jsx)("th",{children:"Jenis"}),(0,k.jsx)("th",{children:"File"}),(0,k.jsx)("th",{style:{textAlign:"right"},children:"Action"})]})}),(0,k.jsx)("tbody",{children:T.map((e=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:e.no_akta}),(0,k.jsx)("td",{children:e.tgl_terbit}),(0,k.jsx)("td",{children:e.nama_notaris}),(0,k.jsx)("td",{children:e.jenis}),(0,k.jsx)("td",{children:(0,k.jsx)("abbr",{title:"Download file",children:(0,k.jsx)(f.rU,{to:"",children:(0,k.jsx)(o(),{icon:"download"})})})}),(0,k.jsx)("td",{style:{textAlign:"right",width:"100px"},children:P&&N===e.id_akta?(0,k.jsx)("span",{className:"text-danger",children:"Deleting.."}):(0,k.jsx)(o(),{icon:"delete",style:{fontSize:"16px",cursor:"pointer",color:"red"},onClick:()=>(async e=>{w(e),C(!0),await z.get("vapi/akta/delete/".concat(e)).then((()=>{M()})).catch((e=>console.log(e))),C(!1)})(e.id_akta)})})]},e.id_akta)))})]}),(0,k.jsx)("div",{className:"d-flex justify-content-end mt-2",children:D?(0,k.jsx)(j.Z,{type:"button",color:"dark",size:"sm",outline:!0,onClick:()=>F(!1),content:"center",children:"Tutup"}):(0,k.jsx)(j.Z,{className:"mb-4",type:"button",color:"dark",size:"sm",outline:!0,onClick:()=>F(!0),children:"Tambah Akta"})})]}),D&&(0,k.jsx)(h.Z,{onSubmit:async e=>{e.preventDefault(),Z(!0),l.file=d,await z.post("vapi/akta/store",l).then((()=>{M(),F(!1),(0,v.Z)("success","Data berhasil disimpan"),a("Data Akta Pendirian Perusahaan berhasil disimpan.")})).catch((()=>{(0,v.Z)("error","Gagal menyimpan data"),s("Gagal menyimpan data. Silakan coba lagi.")})),Z(!1)},children:(0,k.jsxs)(i.Z,{className:"bg-light-primary rounded-4 px-3 pt-3 pb-1 mt-3 mb-3",children:[(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"no_akta",children:"Akta Pendirian Perusahaan"}),(0,k.jsx)(u.Z,{type:"text",id:"no_akta",name:"no_akta",placeholder:"Nomor",onChange:e=>I(e)})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"jenis_akta",children:"\xa0"}),(0,k.jsxs)(u.Z,{type:"select",id:"jenis_akta",name:"jenis_akta",onChange:e=>I(e),defaultValue:"",children:[(0,k.jsx)("option",{value:"",disabled:!0,children:"- Jenis Akta -"}),(0,k.jsx)("option",{value:"Pendirian",children:"Pendirian"}),(0,k.jsx)("option",{value:"Perubahan",children:"Perubahan"})]})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"4",className:"mb-2",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"tgl_terbit",children:"\xa0"}),(0,k.jsx)(u.Z,{type:"date",id:"tgl_terbit",name:"tgl_terbit",placeholder:"Tanggal dikeluarkan",onChange:e=>I(e)}),(0,k.jsx)("small",{className:"text-muted position-absolute",children:"Tanggal Dikeluarkan"})]})})]}),(0,k.jsxs)(t.Z,{className:"mb-4",children:[(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsx)(m.Z,{children:(0,k.jsx)(u.Z,{type:"text",id:"nama_notaris",name:"nama_notaris",placeholder:"Notaris",onChange:e=>I(e)})})}),(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{className:"position-relative",children:[(0,k.jsx)(u.Z,{type:"file",id:"fileAktaPendirian",name:"fileAktaPendirian",onChange:e=>(e=>{(0,_.Z)(e.target.files[0]).then((e=>c(e.split(",")[1]))).catch((e=>console.log(e)))})(e),accept:"application/pdf"}),(0,k.jsx)("small",{className:"text-muted position-absolute",children:"Upload file (max. 10mb)"})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsx)(j.Z,{type:"submit",color:"secondary",children:g?(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Menyimpan.."]}):"Simpan"})})]})]})})]})},C=e=>{let{setSuccessMsg:a,setErrMsg:s}=e;const[l,r]=(0,n.useState)(),[d,c]=(0,n.useState)(),[g,Z]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),[P,C]=(0,n.useState)(!1),[D,F]=(0,n.useState)(!1),[z,A]=(0,n.useState)(!1),U=(0,y.Z)(),{isLoading:T,error:M,data:I,refetch:B}=(0,b.a)({queryKey:["izin"],queryFn:()=>U.get("vapi/izin/my").then((e=>e.data.data))});console.log("ahai",z),(0,n.useEffect)((()=>{0===(null===I||void 0===I?void 0:I.length)&&F(!0)}),[I]);const K=e=>{r((a=>({...a,[e.target.id]:e.target.value})))};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h5",{children:"Izin Berusaha"}),T?"Loading..":M?"Something went wrong.":I.length>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(S.Z,{hover:!0,responsive:!0,bordered:!0,children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:"Nomor"}),(0,k.jsx)("th",{children:"Nama Izin"}),(0,k.jsx)("th",{children:"Tanggal Terbit"}),(0,k.jsx)("th",{children:"Tanggal Berakhir"}),(0,k.jsx)("th",{children:"Ket"}),(0,k.jsx)("th",{children:"File"}),(0,k.jsx)("th",{style:{textAlign:"right"},children:"Action"})]})}),(0,k.jsx)("tbody",{children:I.map((e=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:e.nomor}),(0,k.jsx)("td",{children:e.nama_izin}),(0,k.jsx)("td",{children:e.tgl_terbit}),(0,k.jsx)("td",{children:e.tgl_berakhir?e.tgl_berakhir:"-"}),(0,k.jsx)("td",{children:e.keterangan?e.keterangan:"-"}),(0,k.jsx)("td",{children:(0,k.jsx)("abbr",{title:"Download file",children:(0,k.jsx)(f.rU,{to:"",children:(0,k.jsx)(o(),{icon:"download"})})})}),(0,k.jsx)("td",{style:{textAlign:"right",width:"100px"},children:P&&N===e.id_izin?(0,k.jsx)("span",{className:"text-danger",children:"Deleting.."}):(0,k.jsx)(o(),{icon:"delete",style:{fontSize:"16px",cursor:"pointer",color:"red"},onClick:()=>(async e=>{w(e),C(!0),await U.get("vapi/izin/delete/".concat(e)).then((()=>{B()})).catch((e=>console.log(e))),C(!1)})(e.id_izin)})})]},e.id_izin)))})]}),(0,k.jsx)("div",{className:"d-flex justify-content-end mt-2",children:D?(0,k.jsx)(j.Z,{type:"button",color:"dark",size:"sm",outline:!0,onClick:()=>F(!1),content:"center",children:"Tutup"}):(0,k.jsx)(j.Z,{className:"mb-4",type:"button",color:"dark",size:"sm",outline:!0,onClick:()=>F(!0),children:"Tambah Izin"})})]}),D&&(0,k.jsx)(h.Z,{onSubmit:async e=>{e.preventDefault(),Z(!0),l.file=d,l.keterangan=z?"Izin Lainnya":"",await U.post("vapi/izin/store",l).then((()=>{B(),(0,v.Z)("success","Simpan data berhasil"),a("Data Izin Berusaha Perusahaan berhasil disimpan.")})).catch((()=>{(0,v.Z)("error","Gagal menyimpan data"),s("Gagal menyimpan data. Silakan coba lagi.")})),F(!1),Z(!1)},children:(0,k.jsxs)(i.Z,{className:"bg-light-primary rounded-4 px-3 pt-3 pb-1 mt-3 mb-3",children:[(0,k.jsx)(t.Z,{children:(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{check:!0,children:[(0,k.jsx)(u.Z,{type:"checkbox",id:"dok_surat_penyampaian_penawaran",onChange:e=>A(e.target.checked)}),(0,k.jsx)(x.Z,{check:!0,htmlFor:"dok_surat_penyampaian_penawaran",className:"form-label",children:"Izin Usaha Lainnya (Jika Ada)"})]})})}),(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"nomor",children:"Nomor Izin Berusaha"}),(0,k.jsx)(u.Z,{type:"text",id:"nomor",name:"nomor",placeholder:"Nomor",onChange:e=>K(e)})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"tgl_terbit",children:"Tanggal Dikeluarkan"}),(0,k.jsx)(u.Z,{type:"date",id:"tgl_terbit",name:"tgl_terbit",placeholder:"Tanggal dikeluarkan",onChange:e=>K(e),required:!0})]})}),z?(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{className:"position-relative",children:[(0,k.jsx)(x.Z,{htmlFor:"tgl_berakhir",children:"Nama Izin Lainnya"}),(0,k.jsx)(u.Z,{type:"text",id:"nama_izin",name:"nama_izin",onChange:e=>K(e)})]})}):(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{children:[(0,k.jsx)(x.Z,{htmlFor:"tgl_berakhir",children:"Berakhir"}),(0,k.jsx)(u.Z,{type:"date",id:"tgl_berakhir",name:"tgl_berakhir",placeholder:"Tanggal Berakhir",onChange:e=>K(e),required:!0})]})})]}),(0,k.jsxs)(t.Z,{className:"mb-4",children:[(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsxs)(m.Z,{className:"position-relative",children:[(0,k.jsx)(u.Z,{type:"file",id:"file",name:"file",onChange:e=>(e=>{(0,_.Z)(e.target.files[0]).then((e=>c(e.split(",")[1]))).catch((e=>console.log(e)))})(e),required:!0,accept:"application/pdf"}),(0,k.jsx)("small",{className:"text-muted position-absolute",children:"Upload file (max. 10mb)"})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"4",children:(0,k.jsx)(j.Z,{type:"submit",color:"secondary",children:g?(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Menyimpan.."]}):"Simpan"})})]})]})})]})},D=e=>{let{title:a,filename:s,children:n}=e;return(0,k.jsxs)(t.Z,{className:"mb-4",children:[(0,k.jsx)("span",{children:a}),(0,k.jsx)(i.Z,{sm:"12",lg:"12",className:"file-view",children:(0,k.jsxs)("div",{className:"d-flex rounded-2 border align-items-center justify-content-between overflow-hidden",children:[(0,k.jsx)("div",{className:"h-100 d-flex p-3 bg-success",children:(0,k.jsx)(o(),{icon:"text_snippet",style:{color:"white"}})}),(0,k.jsx)("div",{className:"d-flex w-100 px-3 fw-bold",children:(0,k.jsx)(f.rU,{children:s})}),(0,k.jsx)("div",{className:"d-flex p-2 ",children:n})]})})]})},F=[{id:1,label:"Company Profil",name:"profil"},{id:2,label:"KTP (Pengurus Yang Tertera Pada Akta Perubahan Terakhir Perusahaan)",name:"ktp"},{id:3,label:"SK Kemenkum HAM",name:"sk_kemenkumham"},{id:4,label:"Pakta Integritas",name:"fakta_integritas",template:!0},{id:5,label:"Surat Pemberitahuan Tahunan (SPT) 3 Tahun Terakhir",name:"spt"},{id:6,label:"Laporan Pajak PPh 3 Bulan Terakhir",name:"pph"},{id:7,label:"Laporan Keuangan 3 Tahun Terakhir (Perusahaan Yang Telah Diaudit Menjadi Nilai Tambah)",name:"lap_keuangan"},{id:8,label:"Rekening Koran 3 Bulan Terakhir",name:"rek_koran"}],z=e=>{let{setSuccessMsg:a,setErrMsg:s}=e;const[l,r]=(0,n.useState)(),[d,c]=(0,n.useState)(),[g,Z]=(0,n.useState)(),[N,S]=(0,n.useState)(!1),[w,P]=(0,n.useState)(!1),C=(0,y.Z)(),{isLoading:z,error:A,data:U,refetch:T}=(0,b.a)({queryKey:["documents"],queryFn:()=>C.get("vapi/file/dokumen-perusahaan").then((e=>e.data.data))}),M=(e,a,s)=>{r(e),c(s),(0,_.Z)(a).then((e=>Z(e.split(",")[1]))).catch((e=>console.log(e)))},I=async e=>{e.preventDefault(),S(!0);const n={whatfile:d,file:g};await C.post("vapi/file/upload",n).then((e=>{!0===e.data.success?((0,v.Z)("success","Upload file berhasil"),a(e.data.message),T(),r(),P(!1)):((0,v.Z)("error","Upload file gagal"),s("Upload file gagal. Silakan coba lagi."))})),S(!1)};return console.log(U),z?"":A?"Something went wrong.":F.map((e=>U.map((a=>a.id===e.name&&(0,k.jsx)(t.Z,{className:"mb-4",children:(0,k.jsx)(h.Z,{onSubmit:I,children:(0,k.jsx)(m.Z,{children:(0,k.jsxs)(t.Z,{children:[(0,k.jsxs)(x.Z,{htmlFor:e.name,children:[w&&l===e.id?"Update File":""," ",e.label]}),null!==a.file_name?w&&l===e.id?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{sm:"9",children:[(0,k.jsx)(u.Z,{type:"file",id:e.name,name:e.name,onChange:a=>M(e.id,a.target.files[0],e.name),accept:"application/pdf",required:!0}),null!==e&&void 0!==e&&e.template?(0,k.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,k.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,k.jsx)("i",{children:(0,k.jsx)(f.rU,{to:"/",className:"text-decoration-none",children:"*Download template"})})]}):(0,k.jsx)("small",{className:"text-muted position-absolute",children:"Upload file (max. 10mb)"})]}),(0,k.jsx)(i.Z,{sm:"1",className:"d-flex justify-content-center pb-3 ",children:(0,k.jsx)(j.Z,{type:"button",onClick:()=>{r(),P(!1)},color:"secondary",outline:!0,children:"Cancel"})}),(0,k.jsx)(i.Z,{sm:"2",children:(0,k.jsx)(j.Z,{type:"submit",disabled:e.id!==l||e.id===l&&N,children:N&&e.id===l?(0,k.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Uploading.."]}):"Upload"})})]}):(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"11",children:(0,k.jsx)(D,{title:"",filename:a.file_name})}),(0,k.jsx)(i.Z,{sm:"1",className:"d-flex justify-content-center pb-3 ",children:(0,k.jsx)("button",{type:"button",style:{border:"none",background:"none"},children:(0,k.jsx)(o(),{icon:"edit",className:"text-muted",style:{fontSize:"20px"},onClick:()=>{r(e.id),P(!0)}})})})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(i.Z,{sm:"10",children:[(0,k.jsx)(u.Z,{type:"file",id:e.name,name:e.name,onChange:a=>M(e.id,a.target.files[0],e.name),accept:"application/pdf",required:!0}),null!==e&&void 0!==e&&e.template?(0,k.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,k.jsx)("small",{className:"text-muted",children:"Upload file (max. 10mb)"}),(0,k.jsx)("i",{children:(0,k.jsx)(f.rU,{to:"/",className:"text-decoration-none",children:"*Download template"})})]}):(0,k.jsx)("small",{className:"text-muted position-absolute",children:"Upload file (max. 10mb)"})]}),(0,k.jsx)(i.Z,{sm:"2",children:(0,k.jsx)(j.Z,{type:"submit",block:!0,disabled:e.id!==l||e.id===l&&N,children:N&&e.id===l?(0,k.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Uploading.."]}):"Upload"})})]})]})})})},e.id)))))},A=e=>{let{setActiveStep:a,setSuccessMsg:s,setErrMsg:n,documentIsDone:d}=e;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(t.Z,{lg:"12",className:"justify-content-center",children:(0,k.jsx)(i.Z,{lg:"12",children:(0,k.jsx)(l.Z,{className:"rounded-4 w-100",children:(0,k.jsxs)(r.Z,{children:[(0,k.jsx)("h4",{className:"fw-bold",children:"Dokumen Perusahaan"}),(0,k.jsx)(P,{setSuccessMsg:s,setErrMsg:n}),(0,k.jsx)(C,{setSuccessMsg:s,setErrMsg:n}),(0,k.jsx)(z,{setSuccessMsg:s,setErrMsg:n}),(0,k.jsxs)(m.Z,{className:"d-flex justify-content-end mt-4",children:[(0,k.jsx)(j.Z,{type:"button",color:"primary",className:"me-2",outline:!0,onClick:()=>a(2),children:"Sebelumnya"}),(0,k.jsx)(j.Z,{type:"button",color:"primary",className:"me-2",disabled:!d,onClick:()=>a(4),children:"Selanjutnya"})]})]})})})})})};function U(){const e=(new Date).getFullYear(),a=[];for(let s=2e3;s<=e;s++)a.push(s);return a}const T=e=>{let{setActiveStep:a,portofolioIsDone:s,setPortofolioIsDone:d,setSuccessMsg:c,setErrMsg:x}=e;const[g,Z]=(0,n.useState)(),[f,N]=(0,n.useState)({}),[w,P]=(0,n.useState)(),[C,D]=(0,n.useState)(!1),[F,z]=(0,n.useState)(!1),[A,T]=(0,n.useState)(void 0),M=(0,y.Z)(),{isLoading:I,error:B,data:K,refetch:L}=(0,b.a)({queryKey:["porto"],queryFn:()=>M.get("vapi/porto/my").then((e=>(e.data.data.length>0?d(!0):d(!1),e.data.data)))}),q=e=>{N((a=>({...a,[e.target.id]:e.target.value})))};return(0,k.jsx)(t.Z,{lg:"12",className:"justify-content-center",children:(0,k.jsx)(i.Z,{lg:"12",children:(0,k.jsx)(l.Z,{className:"rounded-4 w-100",children:(0,k.jsxs)(r.Z,{children:[(0,k.jsx)("h4",{className:"fw-bold",children:"Portofolio Pengalaman"}),I?"Loading...":B?"Something went wrong.":(null===K||void 0===K?void 0:K.length)>0?(0,k.jsx)(S.Z,{hover:!0,children:(0,k.jsx)("tbody",{children:K.map(((e,a)=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:a+1}),(0,k.jsx)("td",{style:{textAlign:"left"},children:e.nama_project},e.id_porto),(0,k.jsx)("td",{children:e.tahun_mulai}),(0,k.jsx)("td",{children:e.tahun_selesai}),(0,k.jsx)("td",{children:e.durasi}),(0,k.jsx)("td",{children:e.nilai_po}),(0,k.jsx)("td",{style:{textAlign:"left"},children:e.owner}),(0,k.jsx)("td",{style:{textAlign:"right",width:"100px"},children:F&&A===e.id_porto?(0,k.jsx)("span",{className:"text-danger",children:"Deleting.."}):(0,k.jsx)(o(),{icon:"delete",style:{fontSize:"16px",cursor:"pointer",color:"red"},onClick:()=>(async e=>{T(e),z(!0),await M.get("vapi/porto/delete/".concat(e)).then((e=>{!0===e.data.success?(L(),c("Portofolio berhasil dihapus.")):x("Data portofolio gagal dihapus. Silakan coba lagi.")})).catch((()=>x("Data portofolio gagal dihapus. Silakan coba lagi."))),z(!1)})(e.id_porto)})})]},e.id_porto)))})}):(0,k.jsx)("div",{className:"d-flex justify-content-center",children:"Belum ada data."}),(0,k.jsx)("div",{className:"d-flex justify-content-end mt-2",children:g?(0,k.jsx)(j.Z,{type:"button",color:"dark",size:"sm",outline:!0,onClick:()=>Z(!1),content:"center",children:"Tutup"}):(0,k.jsx)(j.Z,{type:"button",color:"dark",size:"sm",outline:!0,onClick:()=>Z(!0),children:"Tambah"})}),g&&(0,k.jsx)(h.Z,{onSubmit:async e=>{e.preventDefault(),D(!0),f.file=w,await M.post("vapi/porto/store",f).then((e=>{!0===e.data.success?(L(),(0,v.Z)("success","Portofolio berhasil disimpan"),c("Portofolio berhasil ditambahkan.")):((0,v.Z)("error","Portofolio gagal disimpan"),x("Portofolio gagal disimpan. Silakan coba lagi."))})).catch((()=>x("Something went wrong."))),Z(!1),D(!1)},className:"mt-3",children:(0,k.jsxs)(i.Z,{className:"bg-light-primary rounded-4 px-3 pt-3",children:[(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"5",children:(0,k.jsx)(m.Z,{children:(0,k.jsx)(u.Z,{type:"text",id:"nama_project",name:"nama_project",placeholder:"Nama Project",onChange:q})})}),(0,k.jsx)(i.Z,{sm:"12",lg:"2",children:(0,k.jsx)(m.Z,{children:(0,k.jsxs)(u.Z,{type:"select",id:"tahun_mulai",name:"tahun_mulai",placeholder:"Tahun Mulai",onChange:q,defaultValue:"",children:[(0,k.jsx)("option",{value:"",disabled:!0,children:"- Tahun Mulai -"}),U().reverse().map((e=>(0,k.jsx)("option",{value:e,children:e},e)))]})})}),(0,k.jsx)(i.Z,{sm:"12",lg:"2",children:(0,k.jsx)(m.Z,{children:(0,k.jsxs)(u.Z,{type:"select",id:"tahun_selesai",name:"tahun_selesai",placeholder:"Tahun Berakhir",onChange:q,defaultValue:"",children:[(0,k.jsx)("option",{value:"",disabled:!0,children:"- Tahun Selesai -"}),U().reverse().map((e=>(0,k.jsx)("option",{value:e,children:e},e)))]})})}),(0,k.jsx)(i.Z,{sm:"12",lg:"3",children:(0,k.jsxs)(m.Z,{className:"position-relative",children:[(0,k.jsx)(u.Z,{type:"file",id:"fileSpk",name:"fileSpk",onChange:e=>{(0,_.Z)(e.target.files[0]).then((e=>P(e.split(",")[1]))).catch((e=>console.log(e)))},accept:"application/pdf"}),(0,k.jsx)("small",{className:"text-muted position-absolute",children:"Upload file SPK (max. 10mb)"})]})})]}),(0,k.jsxs)(t.Z,{className:"mt-3",children:[(0,k.jsx)(i.Z,{sm:"12",lg:"5",children:(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"6",children:(0,k.jsx)(m.Z,{children:(0,k.jsx)(u.Z,{type:"number",id:"durasi",name:"durasi",placeholder:"Durasi (ex. 32 Bulan)",onChange:q})})}),(0,k.jsx)(i.Z,{sm:"12",lg:"6",children:(0,k.jsx)(m.Z,{children:(0,k.jsx)(u.Z,{type:"number",id:"nilai_po",name:"nilai_po",placeholder:"Nilai Pekerjaan",onChange:q})})})]})}),(0,k.jsx)(i.Z,{sm:"12",lg:"7",children:(0,k.jsx)(t.Z,{children:(0,k.jsx)(i.Z,{sm:"12",lg:"12",children:(0,k.jsx)(m.Z,{children:(0,k.jsx)(u.Z,{type:"text",id:"owner",name:"owner",placeholder:"Pemilik Pekerjaan",onChange:q})})})})}),(0,k.jsx)(i.Z,{sm:"12",lg:"2",className:"mb-2",children:(0,k.jsx)(j.Z,{type:"submit",color:"dark",children:C?(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Menyimpan.."]}):"Tambah"})})]})]})}),(0,k.jsxs)(m.Z,{className:"d-flex justify-content-end mt-3",children:[(0,k.jsx)(j.Z,{type:"button",color:"primary",className:"me-2",outline:!0,onClick:()=>a(3),children:"Sebelumnya"}),(0,k.jsx)(j.Z,{type:"button",color:"primary",className:"me-2",onClick:()=>a(5),disabled:!s,children:"Selanjutnya"})]})]})})})})};var M=s(2877);const I=e=>{let{setActiveStep:a,businessFieldIsDone:s,setSuccessMsg:t,setErrMsg:i}=e;const[l,r]=(0,n.useState)(),d=(0,y.Z)();return console.log(s),(0,k.jsxs)(m.Z,{className:"d-flex justify-content-end mt-4",children:[(0,k.jsx)(j.Z,{type:"button",color:"primary",className:"me-2",outline:!0,onClick:()=>a(4),children:"Sebelumnya"}),l?(0,k.jsx)(j.Z,{type:"button",color:"primary",disabled:!0,children:(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Mengirim.."]})}):(0,k.jsxs)(j.Z,{type:"button",color:"success",className:"me-2 d-flex gap-2",onClick:async()=>{r(!0),await d.put("vapi/perusahaan/submit").then((()=>{(0,v.Z)("success","Data berhasil dikirim"),t("Data Perusahaan Anda akan direview oleh Admin. Silakan cek email secara berkala untuk pembaruan status selanjutnya.")})).catch((()=>{i("Gagal mengirim data. Silakan coba lagi.")})),r(!1)},disabled:!s,children:[(0,k.jsx)(o(),{icon:"send"}),"Kirim"]})]})},B=e=>{let{setActiveStep:a,businessFieldIsDone:s,setBusinessFieldIsDone:d,setSuccessMsg:c,setErrMsg:m}=e;const[x,u]=(0,n.useState)(),[g,Z]=(0,n.useState)(!1),[f,N]=(0,n.useState)(!1),[w,_]=(0,n.useState)(),[P,C]=(0,n.useState)(),[D,F]=(0,n.useState)(),z=(0,y.Z)(),{isLoading:A,error:U,data:T,refetch:B}=(0,b.a)({queryKey:["listkbli"],queryFn:()=>z.get("vapi/kbli/view").then((e=>{var a;return(null===(a=e.data.data)||void 0===a?void 0:a.length)>0?d(!0):d(!1),e.data.data}))});(0,n.useEffect)((()=>{!async function(){await z.get("vapi/kbli/list").then((e=>C(e.data.data))).catch((e=>console.log(e)))}()}),[]);return(0,k.jsx)(t.Z,{lg:"12",className:"justify-content-center",children:(0,k.jsx)(i.Z,{lg:"12",children:(0,k.jsx)(l.Z,{className:"rounded-4 w-100",children:(0,k.jsxs)(r.Z,{children:[(0,k.jsx)("h4",{className:"fw-bold",children:"Daftar Bidang Usaha"}),A?"Loading..":U?"Something went wrong.":(0,k.jsx)(S.Z,{hover:!0,children:(null===T||void 0===T?void 0:T.length)>0?(0,k.jsx)("tbody",{children:T.map((e=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{style:{textAlign:"left"},children:"NIB"}),(0,k.jsx)("td",{style:{textAlign:"left"},children:e.nomor_kbli}),(0,k.jsx)("td",{style:{textAlign:"left"},children:e.nama_kbli}),(0,k.jsx)("td",{style:{textAlign:"left"},children:e.resiko}),(0,k.jsx)("td",{style:{textAlign:"right",width:"100px"},children:f&&D===e.id?(0,k.jsx)("span",{className:"text-danger",children:"Deleting.."}):(0,k.jsx)(o(),{icon:"delete",style:{fontSize:"16px",cursor:"pointer",color:"red"},onClick:()=>(async e=>{F(e),N(!0),await z.delete("vapi/kbli/delete/".concat(e)).then((()=>{B(),(0,v.Z)("success","KBLI berhasil dihapus.")})).catch((()=>{(0,v.Z)("error","Gagal menghapus data. Silakan coba lagi.")})),N(!1)})(e.id)})})]},e.id)))}):(0,k.jsx)("tbody",{children:(0,k.jsx)("tr",{children:(0,k.jsx)("td",{children:"Belum ada data."})})})}),(0,k.jsx)("div",{className:"d-flex justify-content-end mt-2",children:!x&&(0,k.jsx)(j.Z,{type:"button",color:"dark",size:"sm",outline:!0,onClick:()=>u(!0),children:"Tambah KBLI"})}),x&&(0,k.jsx)(h.Z,{onSubmit:async e=>{e.preventDefault(),Z(!0),w?await z.post("vapi/kbli/store",{id_kbli:w.value}).then((()=>{B(),(0,v.Z)("success","KBLI berhasil ditambah")})).catch((e=>{409===e.response.status?(0,v.Z)("error","Data KBLI sudah ada."):(0,v.Z)("Gagal menyimpan data. Silakan coba lagi.")})):(0,v.Z)("error","Tidak ada KBLI yang dipilih"),u(!1),Z(!1)},children:(0,k.jsx)(i.Z,{className:"bg-light-primary rounded-4 px-3 pt-3 mt-3",children:(0,k.jsxs)(t.Z,{children:[(0,k.jsx)(i.Z,{sm:"12",lg:"8",className:"mb-3",children:(0,k.jsx)(M.ZP,{closeMenuOnSelect:!0,options:P,onChange:e=>_(e)})}),(0,k.jsx)(i.Z,{sm:"12",lg:"2",children:(0,k.jsxs)("div",{className:"d-flex gap-2",children:[(0,k.jsx)(j.Z,{color:"secondary",outline:!0,onClick:()=>u(!1),children:"Cancel"}),(0,k.jsx)(j.Z,{type:"submit",color:"dark",children:g?(0,k.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,k.jsx)(p.Z,{size:"sm"}),"Menyimpan.."]}):"Tambah"})]})})]})})}),(0,k.jsx)(I,{setActiveStep:a,businessFieldIsDone:s,setSuccessMsg:c,setErrMsg:m})]})})})})},K=()=>{const[e,a]=(0,n.useState)(1),[s,c]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),[x,u]=(0,n.useState)(!1),[j,p]=(0,n.useState)(!1),[g,Z]=(0,n.useState)(!1),[f,b]=(0,n.useState)(),[v,S]=(0,n.useState)(),_=(0,y.Z)();(0,n.useEffect)((()=>{!async function(){await _.get("vapi/perusahaan/document-status").then((e=>u(e.data.data)))}(),async function(){await _.get("vapi/perusahaan/jajaran-status").then((e=>m(e.data.data)))}(),async function(){await _.get("vapi/perusahaan/portofolio-status").then((e=>p(e.data.data)))}(),async function(){await _.get("vapi/perusahaan/bidangusaha-status").then((e=>Z(e.data.data)))}()}),[]);const P=[{id:1,title:"Data Umum Perusahaan",isDone:s},{id:2,title:"Jajaran Direksi/Komisaris Perusahaan",isDone:h},{id:3,title:"Dokumen Perusahaan",isDone:x},{id:4,title:"Portofolio Pengalaman",isDone:j},{id:5,title:"Daftar Bidang Usaha",isDone:g}];return(0,n.useEffect)((()=>{f&&setTimeout((()=>{b()}),5e3),v&&setTimeout((()=>{S()}),5e3)}),[f,v]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(t.Z,{lg:"12",className:"justify-content-center",children:(0,k.jsx)(i.Z,{lg:"12",children:(0,k.jsx)(l.Z,{className:"rounded-4 w-100",children:(0,k.jsx)(r.Z,{children:(0,k.jsx)("div",{className:"step-container",children:P.map((s=>(0,k.jsxs)("div",{className:"step-item ".concat(s.isDone&&"done hover"),onClick:()=>s.isDone?a(s.id):"",children:[(0,k.jsx)("div",{className:"step-title ".concat(e===s.id?"text-dark":"text-muted"),children:s.title}),(0,k.jsx)("div",{className:"step-circle ".concat(s.isDone&&"done"),children:(0,k.jsx)(o(),{icon:"".concat(s.isDone?"check":s.id===e?"update":"adjust")})})]},s.id)))})})})})}),f&&(0,k.jsxs)(d.Z,{className:"rounded-4 d-flex justify-content-between text-success fw-bold",color:"success",children:[f,(0,k.jsx)(o(),{icon:"close",onClick:()=>b(!f)})]}),v&&(0,k.jsxs)(d.Z,{className:"rounded-4 d-flex justify-content-between text-danger fw-bold",color:"danger",children:[v,(0,k.jsx)(o(),{icon:"close",onClick:()=>S(!v)})]}),(0,k.jsxs)("div",{children:[1===e&&(0,k.jsx)(N,{setActiveStep:a,generalIsDone:s,setGeneralIsDone:c}),2===e&&(0,k.jsx)(w,{setActiveStep:a,officialIsDone:h,setOfficialIsDone:m}),3===e&&(0,k.jsx)(A,{setActiveStep:a,setSuccessMsg:b,setErrMsg:S,documentIsDone:x}),4===e&&(0,k.jsx)(T,{setActiveStep:a,portofolioIsDone:j,setPortofolioIsDone:p,setSuccessMsg:b,setErrMsg:S}),5===e&&(0,k.jsx)(B,{setActiveStep:a,businessFieldIsDone:g,setBusinessFieldIsDone:Z,setSuccessMsg:b,setErrMsg:S})]})]})}},7493:(e,a,s)=>{s.d(a,{Z:()=>n});const n=e=>new Promise((a=>{let s="";const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{s=n.result,a(s)}}))}}]);
//# sourceMappingURL=269.8a18354c.chunk.js.map